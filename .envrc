#!/usr/bin/env bash
# direnv configuration for vex-cli
# This automatically loads the Nix development environment when entering the directory

# Set up watch files for nix-related changes
watch_file flake.nix
watch_file pyproject.toml
watch_file uv.lock

# Load the Nix flake's default dev shell
# This uses nix-direnv if available, otherwise falls back to standard nix-shell
use flake

# Add project scripts to PATH if they exist
if [[ -d "scripts" ]]; then
  PATH_add scripts
fi

# Display helpful information (only if terminal is interactive)
if [[ -t 1 ]]; then
  echo ""
  echo "üêç Project: vex-cli"
  echo "üì¶ Python: $(command -v python3 2>/dev/null || echo 'not found')"
  echo "üõ†Ô∏è  UV: $(command -v uv 2>/dev/null || echo 'not found')"
  echo ""
  echo "‚ÑπÔ∏è  Mode: Nix (uv2nix-managed Python)"
  echo "‚ÑπÔ∏è  To use FHS environment: nix develop .#fhs"
  echo ""
fi
